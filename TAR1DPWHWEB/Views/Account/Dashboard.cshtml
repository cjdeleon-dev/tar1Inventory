@model TAR1DPWHDATA.DataModels.UserModel
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

@{
    var imgSrc = "";
    var base64 = "";
}

@if (Model != null)
{
    base64 = Convert.ToBase64String(Model.UserPic);
    imgSrc = String.Format("data:image/jpg;base64,{0}", base64);
}


<script src="~/Scripts/myscripts/dashboard_v1.0.0.1.js"></script>
<center>
    <img src="@imgSrc" id="img1" class="picdash" style="height:120px;width:120px;" /><br /><br />
    <a href="#" id="ephoto" onclick="return emptyUploadFile();" data-toggle="modal" data-target="#myModal"><i class="glyphicon glyphicon-edit"></i> Edit Photo</a>&nbsp;&nbsp;&nbsp;

    @if (Model != null)
    {
        if (ViewBag.Message != "NO PHOTO")
        {
            <a href="#" id="dphoto" onclick="return deletePhoto(@Model.Id)"><i class="glyphicon glyphicon-trash"></i> Delete Photo</a>
        }

        <h2>@Model.FirstName @Model.MiddleInitial @Model.LastName</h2>
        <h3>@Model.Position</h3>
    }

    <input type="button" class="btn btn-warning" value="RESEED NOW" onclick="reseedNow()" />
</center>


<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            @using (Html.BeginForm("UploadPhoto", "Account", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">X</button>
                    <h4 class="modal-title" id="myModalLabel">Changing Primary Photo</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.Id, new { @class = "hidden" })
                        @Html.TextBoxFor(m => m.FirstName, new { @class = "hidden" })
                        @Html.TextBoxFor(m => m.MiddleInitial, new { @class = "hidden" })
                        @Html.TextBoxFor(m => m.LastName, new { @class = "hidden" })
                        @Html.TextBoxFor(m => m.Position, new { @class = "hidden" })
                        <label for="UploadImage">Please select image file: </label>
                        @Html.TextBoxFor(m => m.ImageFile, new { type = "file", required = "required" })
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" id="btnSubmit">Submit</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            }
        </div>
    </div>
</div>

